<%
  const totalPages = Math.max(1, Math.ceil((total || 0) / (limit || 10)));
  const cur = page || 1;
  const base = new URLSearchParams();
  if (typeof q !== 'undefined' && q) base.set('q', q);
  if (typeof type !== 'undefined' && type) base.set('type', type);
  if (typeof tag !== 'undefined' && tag) base.set('tag', tag);
  if (typeof book !== 'undefined' && book) base.set('book', book);
  if (typeof nsfw !== 'undefined' && nsfw) base.set('nsfw', nsfw);
  if (typeof from !== 'undefined' && from) base.set('from', from);
  if (typeof to !== 'undefined' && to) base.set('to', to);
  base.set('limit', limit);
  const makeUrl = (p) => { const s = new URLSearchParams(base.toString()); s.set('page', p); return `?${s.toString()}`; };
%>
<nav aria-label="Page navigation example" class="pagination">
  <% if (cur > 1) { %>
    <a href="<%= makeUrl(cur - 1) %>">Prev</a>
  <% } %>
  <span>Page <%= cur %> / <%= totalPages %></span>
  <% if (cur < totalPages) { %>
    <a href="<%= makeUrl(cur + 1) %>">Next</a>
  <% } %>
</nav>

